# canvas介绍

1. 什么是canvas（画布）
```
     是HTML5中用来展示图片的一个标签

     <canvas></canvas>

     http://echarts.baidu.com/  统计图

     img标签的区别

         img标签只是用来展示图片

         canvas可以自定义图片或者绘制图片，并且具有用户交互

```

2. 课程目标的定位（应用）
```
    凡是能够看到的图形，都可以利用canvas来展示

    例如：  2d图形， 3d动画，视频，游戏（水果忍者）等等。。。。


            https://threejs.org/examples/     3d

            统计图：http://echarts.baidu.com/  2d统计图

            http://www.html5tricks.com/demo/html5-canvas-firestorm/index.html
            
            切水果
            http://www.html5tricks.com/demo/html5-fruit-ninja/index.html

    备注：
        1.具备很强的交互性

        2.基于浏览器的图形引擎

        3.我的定位是能够绘制简单的统计图（2天的时间）
```

# canvas基本使用   （代码1）
```
    -> 1. 在页面中放置一个canvas标签

       2. 通过canvas.getContext("2d");    获取到绘制2d图形的上下文（绘图工具）
          通过canvas.getContext("webgl"); 获取到绘制3d图形的上下文（绘图工具）
      
        注意：
           一次只能获取一种绘图工具（绘图上下文，不能同时获取两种绘图工具）

    -> canvas绘图的基本思路 （代码2）

         1. 先落笔（找点）            

         2. 移动方向和距离（位置）

         3. 描点连线
    
    -> 方法：

         ctx.moveTo(x,y)  绘图的起始位置（落笔点）    x,y代表横纵坐标

         ctx.lineTo(x,y)  绘制到

         ctx.stroke()     描点连线

         参考：代码2演示绘制一条直线

         备注：
           ctx指的是绘图上下文对象（绘图工具）

    -> 关于canvas标签大小的设置

          1. canvas 默认大小是一个 300*150的标签

          2. 如果改变canvas标签的大小要使用标签属性 width 和height设置

          3. 不推荐使用css设置

          总结：
             1.如果我们使用属性设置大小，那么浏览器会按 
               照属性大小重新分配canvas标签的大小（绘图区域的实际大小）

             2.如果通过css样式设置canvas标签的大小，那么其实浏览器自是将标签的显示范围改成设置大小，而canvas标签实际的绘制区域大小还是300*150，导致图像会拉伸


    -> 关于坐标系的介绍
        
        与css中的坐标系一样。（绘图演示）

        原点位置：在画布的左上角

             X轴：水平从左向右为正

             Y轴：垂直从上向下为正
      

        练习：（课堂案例01）
           1. 在200,100的位置绘制宽为100高为50的矩形

           2. 准备一个600*400的画布，三等分这个画布，分别绘制正方形。直角三角形，梯形
              
              要求：
                在等分的画布区域的中间绘制这些图像


    -> 绘制过程中的问题
        
          1. 最开始绘制的图像的线颜色会深一点？

          总结：
               由于在canvas中绘图是采取的是单图层绘图，在调用stroke方法的时候其实是在重复的描边，所以最开始的颜色会深一点


          2. 解决方式：

               -> 不要在绘制过程中重复使用stroke,只在图形结束后，进行一次描边即可

               -> 重新开启一个图层（例如重新打开一个画板）。在启用canvas的过程中默认会开启一个图层。如果需要开启新的图层使用 ctx.beginPath()

                  注意：如果在开启新图层后，前面的图形绘制如果没有描边，那么会没效果
```

# 闭合图形的绘制相关介绍
```
    课堂代码（3）

    1. 闭合路径： ctx.closePath() 

       总结：通过该方法可以直接实现结束位置与开始位置的链接

    课堂代码（4）

    2. 设置线的链接方式

        lineJoin: round | bevel | miter (默认)
    
  
    3. 线帽（线两端的结束方式）

        lineCap: butt(默认值) | round | square 

    4. 线宽
        linewidth="值";
        
        备注：
           不需要带单位

    5. 线颜色
        strokeStyle="颜色值";

        备注：
            颜色值可以是预定义的颜色：red | green| blue....

            颜色值还可以是rgb

            颜色值还可以是rgba

            颜色值还可以是十六进制 #000

    备注：
       如果在开启新图层后没有单独修改样式，那么前面样式会被继续使用
```

# 绘制渐变色 （案例02,03）
```
    -> 绘制一个宽度为254的渐变线   （练习独立完成）

    -> 通过渐变方案实现             （讲解新方式）
      var grd=ctx.createLinearGradient(x0,y0,x1,y1);

          x0-->渐变开始的x坐标
          y0-->渐变开始的y坐标
          x1-->渐变结束的x坐标
          y1-->渐变结束的y坐标

      grd.addColorStop(0,"black");      设置渐变的开始颜色
      grd.addColorStop(0.1,"yellow");   设置渐变的中间颜色
      grd.addColorStop(1,"red");        设置渐变的结束颜色

      ctx.strokeStyle=grd;
      ctx.stroke();

      备注：
         addColorStop()中渐变的开始位置和结束位置介于0-1之间，0代表开始，1代表结束。中间可以设置任何小数

```


#填充效果（课堂代码08）
```
    1. 绘制一个封闭的图形，如果要设置填充的效果，使用ctx.fll();
  
    2. 填充的样式通过 fillstyle设置
   
    注意：
        如果绘制的不是一个闭合的区域，那么使用fill方法，会自动将开始位置和结束位置链接起来。


    思考？
        1.如果在绘制图形的时候，路径有交叉的时候如何填充？（代码09）

        2.绘制一个填充的回字行图案,设置填充颜色（代码10）
```

#非零环绕原则
```
    1.绘制填充的时候，只会填充闭合的区域，如果没有闭合，那么会将开始和   结束相连并且填充。

    2. 一旦闭合以后，可能将闭合区域分割成若干区域。有些地方需要填充，有些地方不需要填充。

   按照非零环绕原则判断这个部分要不要填充：

      1. 在这个区域内任意选择一点，越简单越孤立越好

      2. 以选择的这个点为圆心，绘制一条完全穿过图形的射线，越简单越好。

      3. 看穿过这条射线的其他线的方向（按照圆周的方向）

      4. 如果是顺时针则 为+1 如果是逆时针为-1

      5. 把这些线进行相加运算，如果等于0则不添加，反之添加（正数或负数）

      练习案例：4

```

# 绘制虚线
```
   原理：

     设置虚线其实就是设置实线与空白部分直接的距离,利用数组描述其中的关系

     例如： [10,10]  实线部分10px 空白部分10px

     例如： [10,5]  实线部分10px 空白部分5px

     例如： [10,5,20]  实线部分10px  空白5px  实线20px  空白部分10px 实线5px 空白20px....

    绘制：

     ctx.setLineDash(数组);
     ctx.stroke();

    注意：
        如果要将虚线改为实线，只要将数组改为空数组即可。
```

#绘制网格(案例)05


#绘制网格坐标系（案例）06


#绘制网格中的点


#绘制网格点连线


#独立完成随机绘制折线图
